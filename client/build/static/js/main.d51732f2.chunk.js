(this["webpackJsonpauto-bot"]=this["webpackJsonpauto-bot"]||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),i=n.n(r),s=(n(98),n(99),n(8)),o=n(164),l=n(167),j=n(169),u=n(51),d=n(170),b=n(80),h=n.n(b),O=n(172),x=n(83),p=n(14),m=n(1),f=Object(o.a)((function(e){return{root:{flexGrow:1,marginBottom:e.spacing(2)},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),v=Object(p.j)((function(e){var t=e.history,n=e.userEmail,a=f(),r=c.a.useState(null),i=Object(s.a)(r,2),o=i[0],b=i[1],p=Boolean(o),v=function(e){t.push(e),b(null)};return Object(m.jsx)("div",{className:a.root,children:Object(m.jsx)(l.a,{position:"static",children:Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(u.a,{variant:"h6",className:a.title,children:["AutoBot",n&&Object(m.jsx)(u.a,{children:n})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:function(e){b(e.currentTarget)},children:Object(m.jsx)(h.a,{})}),Object(m.jsxs)(x.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:function(){return b(null)},children:[Object(m.jsx)(O.a,{onClick:function(){return v("/")},children:"Home"}),Object(m.jsx)(O.a,{onClick:function(){return v("/bots")},children:"Bot Status"}),Object(m.jsx)(O.a,{onClick:function(){return v("/contractcreation")},children:"Contract Creation"}),Object(m.jsx)(O.a,{onClick:function(){return v("/logout")},children:"Logout"})]})]})]})})})})),y=n(13),g=n.n(y),S=n(20),C=n(176),k=n(85),P=n(177),w=n(178),T=n(173),E=n(174),I=n(179),N=n(175),z=function(e){var t=e.status;return Object(m.jsxs)(T.a,{children:[Object(m.jsx)(E.a,{component:"th",scope:"row",children:t.name}),Object(m.jsx)(E.a,{align:"right",children:t.status}),Object(m.jsx)(E.a,{align:"right",children:t.function}),Object(m.jsx)(E.a,{align:"right",children:t.lastUpdateTime}),Object(m.jsx)(E.a,{children:Object(m.jsx)(N.a,{href:"/bots/".concat(t.name,"/queue"),variant:"outlined",color:"primary",align:"right",children:"Queue"})}),Object(m.jsx)(E.a,{children:Object(m.jsx)(N.a,{href:"/bots/".concat(t.name,"/history"),variant:"outlined",color:"primary",align:"right",children:"History"})})]},t.name)},D=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){var e=function(){var e=Object(S.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),setInterval((function(){e()}),1e4)}),[]);var r=function(){var e=Object(S.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://148.77.75.60:6050/api/bots/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(C.a,{component:k.a,children:Object(m.jsxs)(P.a,{"aria-label":"simple table",children:[Object(m.jsx)(w.a,{children:Object(m.jsxs)(T.a,{children:[Object(m.jsx)(E.a,{children:"Name"}),Object(m.jsx)(E.a,{align:"right",children:"Status"}),Object(m.jsx)(E.a,{align:"right",children:"Function"}),Object(m.jsx)(E.a,{align:"right",children:"Last Update"}),Object(m.jsx)(E.a,{align:"right",children:"Queue"}),Object(m.jsx)(E.a,{align:"right",children:"History"})]})}),Object(m.jsx)(I.a,{children:n.map((function(e){return Object(m.jsx)(z,{status:e},e.name)}))})]})})},q=n(47),F=n(181),R=n(180),L=n(182),M=n(195),U=n(184),_=function(e){var t=e.roof;return Object(m.jsxs)(k.a,{className:"genesis_roof",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"Tilt: "}),t.tilt,"\xb0"]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"Azimuth: "}),t.azimuth,"\xb0"]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"Availability: "}),t.availability,"%"]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"Quantity: "}),t.moduleQuantity]})]})},Q=n(40),B=n(50),A=n(183),W=function(e){var t=e.design;return Object(m.jsxs)(R.a,{variant:"outlined",children:[Object(m.jsxs)(F.a,{container:!0,justify:"space-around",alignItems:"center",children:[Object(m.jsx)(F.a,{item:!0,xs:12,lg:6,p:2,children:Object(m.jsx)(u.a,{variant:"h6",children:Object(m.jsx)(L.a,{variant:"inherit",href:"https://trinity-solar.lightning.force.com/lightning/r/Opportunity/".concat(t.opportunityId,"/view"),target:"_blank",children:t.opportunity&&t.opportunity.opportunityName})})}),Object(m.jsx)(F.a,{item:!0,component:"a",children:Object(m.jsx)(N.a,{variant:"contained",color:"primary",href:"/contractcreation/genesisdesigns/"+t.id,align:"right",children:Object(m.jsx)("b",{children:"Create Contract"})})})]}),Object(m.jsx)(A.a,{}),Object(m.jsxs)(U.a,{children:[Object(m.jsxs)(F.a,{container:!0,spacing:2,justify:"space-evenly",m:2,children:[Object(m.jsx)(F.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"outlined",label:t.moduleType?t.moduleType:"Module Not Set",icon:Object(m.jsx)(Q.Icon,{icon:B.a})})}),Object(m.jsx)(F.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"outlined",label:"Total: "+t.roofs.map((function(e){return e.moduleQuantity})).reduce((function(e,t){return e+t}),0),icon:Object(m.jsx)(Q.Icon,{icon:B.a})})})]}),Object(m.jsx)(F.a,{container:!0,spacing:2,justify:"space-evenly",alignItems:"center",children:t.roofs.map((function(e){return Object(m.jsx)(F.a,{item:!0,children:Object(m.jsx)(_,{roof:e},e.id)})}))})]})]})},J=function(e){var t=e.designs;return Object(m.jsxs)(u.a,{component:"span",children:[Object(m.jsx)(u.a,{variant:"h4",children:"Genesis Designs"}),Object(m.jsx)(F.a,{container:!0,spacing:2,children:Object(q.a)(t).reverse().map((function(e){return e.opportunity&&e.moduleType?Object(m.jsx)(F.a,{item:!0,xs:12,lg:6,children:Object(m.jsx)(W,{design:e},e.id)},e.id):null}))})]})},Y=n(30),$=n(81),G=function(e){var t,n,a=e.design,c=e.usage;return Object(m.jsxs)(R.a,{variant:"outlined",style:{height:"100%"},children:[Object(m.jsxs)(F.a,{container:!0,justify:"space-around",alignItems:"center",p:2,children:[Object(m.jsx)(F.a,{item:!0,xs:12,sm:6,children:Object(m.jsx)("h3",{children:Object(m.jsx)(N.a,{variant:"outlined",color:"primary",href:"https://trinity-solar.lightning.force.com/lightning/r/Opportunity/".concat(a.opportunityId,"/view"),children:(null===(t=a.opportunity)||void 0===t?void 0:t.opportunityName)?a.opportunity.opportunityName:null===(n=a.opportunity)||void 0===n?void 0:n.salesforceId})})}),Object(m.jsx)(F.a,{item:!0,xs:12,sm:6,children:a.createDesignTask&&Object(m.jsx)(M.a,{label:a.createDesignTask.completed?a.createDesignTask.sunnovaName:"Not Created",color:a.createDesignTask.completed?"primary":"secondary",size:"small"})})]}),Object(m.jsx)(A.a,{}),Object(m.jsxs)(U.a,{children:[Object(m.jsxs)(F.a,{container:!0,spacing:2,justify:"space-evenly",m:2,children:[Object(m.jsx)(F.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"outlined",label:a.moduleType?a.moduleType:"Module Not Set",icon:Object(m.jsx)(Q.Icon,{icon:B.a})})}),Object(m.jsx)(F.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"outlined",label:"Total: "+a.roofs.map((function(e){return e.moduleQuantity})).reduce((function(e,t){return e+t}),0),icon:Object(m.jsx)(Q.Icon,{icon:B.a})})}),c&&Object(m.jsx)(F.a,{item:!0,children:Object(m.jsx)(M.a,{variant:"outlined",label:"Usage: ".concat(c,"kWh"),icon:Object(m.jsx)(Q.Icon,{icon:$.a})})})]}),Object(m.jsx)(F.a,{container:!0,spacing:2,justify:"space-evenly",alignItems:"center",children:a.roofs.map((function(e){return Object(m.jsx)(F.a,{item:!0,children:Object(m.jsx)(_,{roof:e},e.id)})}))})]})]})},H=n(171),V=n(185),Z=n(128),K=function(e){var t=e.finalizedQuote;return Object(m.jsxs)(H.a,{children:[Object(m.jsx)(V.a,{primary:"Finalized In Sunnova",secondary:t.sunnovaFinalized?"Yes":"No"}),Object(m.jsx)(V.a,{primary:"Contract Downloaded",secondary:t.contractDownloaded?"Yes":"No"}),Object(m.jsx)(V.a,{primary:"Salesforce Updated",secondary:t.salesforceUpdated?"Yes":"No"}),Object(m.jsx)(V.a,{primary:"Combined Packet Downloaded",secondary:t.combinedPacketDownloaded?"Yes":"No"}),Object(m.jsx)(V.a,{primary:"Contract/Combined Uploaded",secondary:t.contractUploaded?"Yes":"No"}),Object(m.jsx)(V.a,{primary:"Email Sent",secondary:t.emailSent?"Yes":"No"}),Object(m.jsx)(V.a,{primary:"Direct Layout Uploaded",secondary:t.genesisUploaded?"Yes":"No"})]})},X=n(62),ee=n(194),te=n(188),ne=n(192),ae=n(189),ce=n(127),re=n(190),ie=n(193),se=[{value:"Competition w/o Proposal"},{value:"Competition w/ Proposal"},{value:"Customer Request"},{value:"Customer Wants Rate Match"},{value:"Low Income"},{value:"Match Rate - Original Systems"},{value:"Match Rate - Referrer"},{value:"Meet Min PPW"},{value:"Meet Starting Rate"},{value:"No Positive Year 1 Savings"},{value:"PPW Cap"},{value:"Rate Cap"},{value:"None"}],oe=function(e){var t=e.onFinalize,n=e.full,c=e.userEmail,r=Object(a.useState)({asphalt:!1,metal:!1,flat:!1,ground:!1,parking:!1,battery:!1,clay:!1,concrete:!1}),i=Object(s.a)(r,2),o=i[0],l=i[1],j={asphalt:"Pitched Roof \u2013 Asphalt",metal:"Pitched Roof \u2013 Metal",flat:"Flat Roof (Less Than 5\xb0)",ground:"Ground-mount",parking:"Parking Canopy",battery:"Battery",clay:"Clay Tile",concrete:"Concrete Tile"},d=function(e){l(Object(Y.a)(Object(Y.a)({},o),{},Object(X.a)({},e.target.name,e.target.checked)))},b=o.asphalt,h=o.metal,x=o.flat,p=o.ground,f=o.parking,v=o.battery,y=o.clay,g=o.concrete,S=Object(a.useState)(""),C=Object(s.a)(S,2),k=C[0],P=C[1],w=Object(a.useState)(""),T=Object(s.a)(w,2),E=T[0],I=T[1],z=Object(a.useState)(""),D=Object(s.a)(z,2),q=D[0],R=D[1],L=Object(a.useState)(""),M=Object(s.a)(L,2),U=M[0],_=M[1],Q=Object(a.useState)(""),B=Object(s.a)(Q,2),A=B[0],W=B[1],J=Object(a.useState)(""),$=Object(s.a)(J,2),G=$[0],H=$[1],V=Object(a.useState)(!1),Z=Object(s.a)(V,2),K=Z[0],oe=Z[1];return Object(m.jsx)(u.a,{component:"span",children:Object(m.jsxs)(F.a,{container:!0,spacing:2,children:[n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(F.a,{item:!0,xs:6,children:Object(m.jsx)(ee.a,{id:"finalize-sunnova-url",variant:"outlined",label:"Sunnova URL",value:k,onChange:function(e){return P(e.target.value)}})}),Object(m.jsx)(F.a,{item:!0,xs:6,children:Object(m.jsx)(ee.a,{id:"finalize-opportunity-id",variant:"outlined",label:"Opportunity ID",value:E,onChange:function(e){return I(e.target.value)}})})]}),Object(m.jsx)(F.a,{item:!0,xs:n?6:12,children:Object(m.jsx)(ee.a,{id:"finalize-salesforce-notes",variant:"outlined",label:"Salesforce Notes",multiline:!0,value:q,onChange:function(e){return R(e.target.value)}})}),Object(m.jsx)(F.a,{item:!0,xs:n?6:12,children:Object(m.jsx)(ee.a,{id:"finalize-email-notes",variant:"outlined",label:"Email Notes",multiline:!0,value:U,onChange:function(e){return _(e.target.value)}})}),Object(m.jsxs)(F.a,{item:!0,xs:n?6:12,children:[Object(m.jsx)(te.a,{id:"finalize-rate-change-reason",children:"LOI Rate Change Reason"}),Object(m.jsx)(ne.a,{labelId:"finalize-rate-change-reason",value:A,onChange:function(e){return W(e.target.value)},children:se.map((function(e){return Object(m.jsx)(O.a,{value:e.value,children:e.value},e.value)}))})]}),Object(m.jsxs)(F.a,{item:!0,xs:n?6:12,children:[Object(m.jsx)(te.a,{id:"finalize-permit-payer",children:"Permit Payer"}),Object(m.jsxs)(ne.a,{labelId:"finalize-permit-payer",value:G,onChange:function(e){return H(e.target.value)},children:[Object(m.jsx)(O.a,{value:"Trinity",children:"Trinity"}),Object(m.jsx)(O.a,{value:"Customer",children:"Customer"}),Object(m.jsx)(O.a,{value:"Other",children:"Other"})]})]}),Object(m.jsx)(F.a,{item:!0,xs:n?6:12,children:Object(m.jsxs)(ae.a,{children:[Object(m.jsx)(ce.a,{children:"Installation Type"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:b,onClick:d,name:"asphalt",color:"primary"}),label:"Pitched Roof \u2013 Asphalt"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:h,onClick:d,name:"metal",color:"primary"}),label:"Pitched Roof \u2013 Metal"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:x,onClick:d,name:"flat",color:"primary"}),label:"Flat Roof (Less Than 5\xb0)"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:p,onClick:d,name:"ground",color:"primary"}),label:"Ground-mount"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:f,onClick:d,name:"parking",color:"primary"}),label:"Parking Canopy"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:v,onClick:d,name:"battery",color:"primary"}),label:"Battery"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:y,onClick:d,name:"clay",color:"primary"}),label:"Clay Tile"}),Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:g,onClick:d,name:"concrete",color:"primary"}),label:"Concrete Tile"})]})}),Object(m.jsx)(F.a,{item:!0,xs:n?6:12,children:Object(m.jsx)(re.a,{control:Object(m.jsx)(ie.a,{checked:K,onClick:function(e){oe(e.target.checked)},name:"create-salesforce-contract",color:"primary"}),label:"Create Salesforce Contract"})}),Object(m.jsx)(F.a,{item:!0,xs:n?6:12,children:Object(m.jsx)(N.a,{variant:"outlined",color:"primary",onClick:function(){var e=Object.entries(o).filter((function(e){return e[1]})).map((function(e){var t=e[0];return j[t]}));t({installation_type:e,sunnova_url:k,opportunity_id:E,quote_notes:q,salesperson_notes:U,permit_payer:G,loi_rate_change_reason:"None"===A?"":A,user_email:c,create_salesforce_object:K})},children:"Finalize"})})]})})},le=Object(Z.a)({secondary:{color:"primary"},card:{lineHeight:"1rem"}}),je=function(e){var t=e.quote,n=e.onFinalize,a=le();return Object(m.jsx)(F.a,{item:!0,xs:6,children:Object(m.jsx)(R.a,{variant:"outlined",style:{height:"100%"},children:Object(m.jsxs)(F.a,{container:!0,alignItems:"center",children:[Object(m.jsx)(F.a,{item:!0,xs:6,children:Object(m.jsx)(U.a,{className:a.card,children:Object(m.jsxs)(H.a,{children:[t.status&&Object(m.jsx)(V.a,{className:a.secondary,primary:"Status",secondary:t.status}),t.valid&&Object(m.jsx)(V.a,{primary:"Valid",secondary:t.valid?"Yes":"No"}),t.financingType&&Object(m.jsx)(V.a,{primary:"Financing Type",secondary:t.financingType}),t.purchaseMethod&&Object(m.jsx)(V.a,{primary:"Purchase Method",secondary:t.purchaseMethod}),t.price&&Object(m.jsx)(V.a,{primary:"User Submitted Price",secondary:("Sunnova Loan"===t.financingType?t.price/100:t.price/1e3)+"$"}),t.systemSize&&Object(m.jsx)(V.a,{primary:"System Size",secondary:t.systemSize+"kW"}),t.solarRate&&Object(m.jsx)(V.a,{primary:"Solar Rate",secondary:"$"+t.solarRate}),t.monthlySunnovaPayment&&Object(m.jsx)(V.a,{primary:"Monthly Payment",secondary:"$"+t.monthlySunnovaPayment}),t.estimatedProduction&&Object(m.jsx)(V.a,{primary:"Estimated Production",secondary:t.estimatedProduction+"kWh"}),t.newUtilityBill&&Object(m.jsx)(V.a,{primary:"New Utility Bill",secondary:"$"+t.newUtilityBill}),t.totalMonthlyElectrityCost&&Object(m.jsx)(V.a,{primary:"Total Monthly Electric Cost",secondary:"$"+t.totalMonthlyElectrityCost}),t.utilityRate&&Object(m.jsx)(V.a,{primary:"Utility Rate",secondary:"$"+t.utilityRate}),t.yearOneSavings&&Object(m.jsx)(V.a,{primary:"Year One Savings",secondary:"$"+t.yearOneSavings}),t.savingsOverTermLength&&Object(m.jsx)(V.a,{primary:"Savings Over Term Length",secondary:"$"+t.savingsOverTermLength}),t.lifetimePayment&&Object(m.jsx)(V.a,{primary:"Lifetime Payment",secondary:"$"+t.lifetimePayment}),t.pricePerWatt&&Object(m.jsx)(V.a,{primary:"Price Per Watt",secondary:"$"+t.pricePerWatt}),t.totalEpc&&Object(m.jsx)(V.a,{primary:"Total EPC",secondary:"$"+t.totalEpc}),t.contractId&&Object(m.jsx)(V.a,{primary:"Contract ID",secondary:t.contractId})]})})}),Object(m.jsx)(F.a,{item:!0,xs:6,children:Object(m.jsx)(U.a,{children:t.finalized?Object(m.jsx)(K,{finalizedQuote:t.finalizeSunnovaQuoteTask}):Object(m.jsx)("form",{children:Object(m.jsx)(oe,{onFinalize:function(e){var a=Object(Y.a)(Object(Y.a)({},e),{},{quote_id:t.id});n(a)}})})})})]})})})},ue=function(e){var t=e.onCreateQuote,n=e.designId,c=Object(a.useState)(""),r=Object(s.a)(c,2),i=r[0],o=r[1],l=Object(a.useState)(""),j=Object(s.a)(l,2),u=j[0],d=j[1],b=Object(a.useState)(""),h=Object(s.a)(b,2),x=h[0],p=h[1],f=Object(a.useState)(""),v=Object(s.a)(f,2),y=v[0],g=v[1];return Object(m.jsx)(R.a,{variant:"outlined",children:Object(m.jsx)(U.a,{children:Object(m.jsx)("form",{children:Object(m.jsxs)(F.a,{container:!0,spacing:2,children:[Object(m.jsxs)(F.a,{item:!0,xs:4,children:[Object(m.jsx)(te.a,{id:"create-quote-salesforce-method",children:"Salesforce Purchase Method"}),Object(m.jsxs)(ne.a,{labelId:"create-quote-salesforce-method",onChange:function(e){return o(e.target.value)},children:[Object(m.jsx)(O.a,{children:"Default"}),Object(m.jsx)(O.a,{value:"Sunnova EZ Pay PPA",children:"Sunnova EZ Pay PPA"}),Object(m.jsx)(O.a,{value:"Sunnova Lease",children:"Sunnova Lease"}),Object(m.jsx)(O.a,{value:"Sunnova Loan",children:"Sunnova Loan"}),Object(m.jsx)(O.a,{value:"Sunnova True PPA",children:"Sunnova True PPA"})]})]}),Object(m.jsxs)(F.a,{item:!0,xs:4,children:[Object(m.jsx)(te.a,{id:"create-quote-sunnova-method",children:"Sunnova Purchase Method"}),Object(m.jsxs)(ne.a,{labelId:"create-quote-sunnova-method",onChange:function(e){return d(e.target.value)},children:[Object(m.jsx)(O.a,{children:"Default"}),Object(m.jsx)(O.a,{value:"EPC to Dealer",children:"EPC to Dealer"}),Object(m.jsx)(O.a,{value:"Dealer EPC Per Watt",children:"Dealer EPC Per Watt"}),Object(m.jsx)(O.a,{value:"Solar Rate",children:"Solar Rate"}),Object(m.jsx)(O.a,{value:"Monthly Payment",children:"Monthly Payment"}),Object(m.jsx)(O.a,{value:"Customer Price",children:"Customer Price"})]})]}),Object(m.jsxs)(F.a,{item:!0,xs:4,children:[Object(m.jsx)(te.a,{id:"create-quote-escalator",children:"Escalator"}),Object(m.jsxs)(ne.a,{labelId:"create-quote-escalator",onChange:function(e){return g(e.target.value)},children:[Object(m.jsx)(O.a,{children:"Default"}),Object(m.jsx)(O.a,{value:"0.0%",children:"0.0%"}),Object(m.jsx)(O.a,{value:"0.9%",children:"0.9%"}),Object(m.jsx)(O.a,{value:"1.9%",children:"1.9%"}),Object(m.jsx)(O.a,{value:"2.9%",children:"2.9%"})]})]}),Object(m.jsx)(F.a,{item:!0,xs:6,children:Object(m.jsx)(ee.a,{id:"create-quote-price",label:"Price",variant:"outlined",value:x,onChange:function(e){return p(e.target.value)}})}),Object(m.jsx)(N.a,{variant:"outlined",color:"primary",onClick:function(){var e={design_id:n,salesforce_purchase_method:i,sunnova_purchase_method:u,price:x.replace(".",""),salesforce_escalator:y};t(e)},children:"Submit"})]})})})})},de="http://148.77.75.60:6050/",be=function(e){var t,n=e.designs,c=e.setDesigns,r=e.setFormSubmitted,i=Object(a.useState)(!1),o=Object(s.a)(i,2),l=o[0],j=o[1],d=Object(p.h)().id,b=n.find((function(e){return e.id.toString()===d})),h=function(e){fetch(de+"api/contractcreation/quote/finalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){alert("Quote has been finalized. Please finalize design in Genesis."),r(!0)}))};return Object(m.jsxs)(u.a,{component:"span",children:[Object(m.jsx)("h1",{children:"Create Contract"}),Object(m.jsxs)(F.a,{container:!0,spacing:1,children:[Object(m.jsx)(F.a,{item:!0,xs:12,md:6,children:b&&Object(m.jsx)(G,{design:b,usage:null===(t=b.opportunity)||void 0===t?void 0:t.usage})}),Object(m.jsx)(F.a,{item:!0,xs:12,md:6,children:Object(m.jsxs)(R.a,{variant:"outlined",style:{height:"100%"},children:[Object(m.jsx)(U.a,{children:"Bot Info"}),Object(m.jsxs)(U.a,{children:[Object(m.jsx)("p",{children:"Name: Bot Name"}),Object(m.jsx)("p",{children:"Status: Bot Status"})]})]})})]}),Object(m.jsxs)(F.a,{container:!0,spacing:1,children:[Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(N.a,{variant:"outlined",color:"primary",style:{width:"100%"},onClick:function(){return j(!l)},children:l?"Close":"Create New Quote"})}),l&&Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ue,{designId:b.id,onCreateQuote:function(e){fetch(de+"api/contractcreation/quote/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(e.id){var t=n.map((function(t){if(t.id===e.id){var n=[].concat(Object(q.a)(t.sunnovaQuotes),[e]);return Object(Y.a)(Object(Y.a)({},t),{},{sunnovaQuotes:n})}return t}));c(t)}})),j(!1)}})}),b&&b.sunnovaQuotes.map((function(e){return Object(m.jsx)(je,{quote:e,onFinalize:h},e.id)}))]})]})},he=n(126),Oe=function(e){e.history;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"Contract Creation"}),Object(m.jsxs)(H.a,{children:[Object(m.jsx)(A.a,{}),Object(m.jsx)(he.a,{button:!0,component:"a",href:"/contractcreation/genesisdesigns",children:"Genesis Designs"}),Object(m.jsx)(A.a,{}),Object(m.jsx)(he.a,{button:!0,component:"a",href:"/contractcreation/finalize",children:"Finalize Contract"}),Object(m.jsx)(A.a,{}),Object(m.jsx)(he.a,{button:!0,component:"a",href:"/contractcreation/disqualify",children:"Disqualify Opportunity"}),Object(m.jsx)(A.a,{})]})]})},xe=function(e){var t=e.userEmail,n=Object(a.useState)(),c=Object(s.a)(n,2),r=c[0],i=c[1],o=function(e){fetch(de+"api/contractcreation/finalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.id?(i(e.id),alert("Contract has been finalized. Please finalize design in Genesis.")):alert("There was an error finalizing this quote, please try again.")})).catch((function(e){console.log(e),alert("There was an error finalizing this contract.")}))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.a,{variant:"h4",children:"Finalize Contract"}),Object(m.jsx)(oe,{full:!0,userEmail:t,finalizeContract:o,onFinalize:o}),r&&Object(m.jsx)(p.a,{to:"/contractcreation/finalize/"+r})]})},pe=function(){var e=Object(p.h)().id,t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){var t=function(){var t=Object(S.a)(g.a.mark((function t(){var n,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(de+"api/contractcreation/finalize/"+e);case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var e=Object(S.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n(),setInterval((function(){n()}),1e4)}),[e]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"Finalized Contract"}),!c&&Object(m.jsx)("div",{children:"Loading..."}),c&&Object(m.jsx)(K,{finalizedQuote:c})]})},me=n(82),fe=n.n(me),ve=function(e){var t=e.userEmail,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(""),l=Object(s.a)(o,2),j=l[0],d=l[1],b=Object(a.useState)(""),h=Object(s.a)(b,2),x=h[0],f=h[1],v=Object(a.useState)(""),y=Object(s.a)(v,2),g=y[0],S=y[1],C=Object(a.useState)(""),k=Object(s.a)(C,2),P=k[0],w=k[1],T=Object(p.g)(),E=fe.a.parse(T.search);Object(a.useEffect)((function(){E.opportunityId&&i(E.opportunityId)}),[E.opportunityId]);var I=function(e){fetch(de+"api/contractcreation/disqualify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.id?alert("Opportunity Disqualified"):alert("There was an issue. Please try again later.")})).catch((function(e){alert("There was an issue. Please try again later."),console.log(e)}))};return Object(m.jsxs)(u.a,{component:"span",children:[Object(m.jsx)("h2",{children:"Disqualify Opportunity"}),Object(m.jsxs)(F.a,{container:!0,spacing:2,children:[Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{id:"disqualify-opportunity-id",variant:"outlined",label:"Opportunity ID",value:r,onChange:function(e){return i(e.target.value)},autoComplete:"off"})}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{id:"disqualify-notes",variant:"outlined",label:"Email Notes",value:j,multiline:!0,onChange:function(e){return d(e.target.value)},autoComplete:"off"})}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{id:"disqualify-lost-comments",variant:"outlined",label:"Lost Comments",value:x,multiline:!0,onChange:function(e){return f(e.target.value)},autoComplete:"off"})}),Object(m.jsxs)(F.a,{item:!0,xs:12,children:[Object(m.jsx)(te.a,{id:"disqualify-stage-status",children:"Stage Status"}),Object(m.jsxs)(ne.a,{labelId:"disqualify-stage-status",value:g,onChange:function(e){return S(e.target.value)},children:[Object(m.jsx)(O.a,{value:"Worth Trying Again",children:"Worth Trying Again"}),Object(m.jsx)(O.a,{value:"Do Not Contact",children:"Do Not Contact"})]})]}),Object(m.jsxs)(F.a,{item:!0,xs:12,children:[Object(m.jsx)(te.a,{id:"disqualify-reason-lost",children:"Reason Lost"}),Object(m.jsx)(ne.a,{labelId:"disqualify-reason-lost",value:P,onChange:function(e){return w(e.target.value)},children:["Duplicate Lead","Financial - Credit Reject","LOI- No Contract due to Shade","LOI- Incomplete","Low Electric Usage","Low Income Discount","No Year 1 Savings","Rep Unresponsive","Structural Issues","Unable to Meet the Minimum System Size","Unable to Reach Minimum PPW"].map((function(e){return Object(m.jsx)(O.a,{value:e,children:e},e)}))})]}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(N.a,{variant:"outlined",color:"primary",onClick:function(){I({opportunity_id:r,email:t,notes:j})},children:"Submit"})})]})]})},ye=function(e){var t=e.userEmail,n=Object(p.i)().path,c=Object(a.useState)([]),r=Object(s.a)(c,2),i=r[0],o=r[1],l=Object(a.useState)(!1),j=Object(s.a)(l,2),u=j[0],d=j[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(S.a)(g.a.mark((function e(){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://148.77.75.60:6050/salesforce/contract/sunnova?user_email="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=Object(S.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,o(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n(),setInterval((function(){n()}),1e4)}),[u]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{path:"".concat(n,"/genesisdesigns/:id"),component:be,children:Object(m.jsx)(be,{setDesigns:o,designs:i,setFormSubmitted:d})}),Object(m.jsx)(p.b,{path:"".concat(n,"/genesisdesigns"),children:Object(m.jsx)(J,{designs:i})}),Object(m.jsx)(p.b,{path:"".concat(n,"/finalize/:id"),component:pe,children:Object(m.jsx)(pe,{userEmail:t})}),Object(m.jsx)(p.b,{path:"".concat(n,"/finalize"),children:Object(m.jsx)(xe,{userEmail:t})}),Object(m.jsx)(p.b,{path:"".concat(n,"/disqualify"),children:Object(m.jsx)(ve,{userEmail:t})}),Object(m.jsx)(p.b,{path:"".concat(n),children:Object(m.jsx)(Oe,{})})]})})},ge=n(191),Se=function(e){var t=e.setToken,n=e.setUserEmail,c=Object(a.useState)(),r=Object(s.a)(c,2),i=r[0],o=r[1],l=Object(a.useState)(),j=Object(s.a)(l,2),d=j[0],b=j[1],h=Object(a.useState)(),O=Object(s.a)(h,2),x=O[0],p=O[1],f=function(){var e=Object(S.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://148.77.75.60:6050/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(S.a)(g.a.mark((function e(a){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(i,d);case 2:(c=e.sent).token?(t(c.token),n(i)):p(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(u.a,{children:[Object(m.jsx)("h2",{children:"Login"}),x&&Object(m.jsx)(u.a,{children:"Incorrect Email or Password"}),Object(m.jsx)("form",{children:Object(m.jsxs)(F.a,{container:!0,spacing:2,children:[Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{id:"email",variant:"outlined",label:"Email",onChange:function(e){return o(e.target.value)}})}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{type:"password",id:"password",variant:"outlined",label:"Password",onChange:function(e){return b(e.target.value)}})}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(N.a,{id:"login",variant:"contained",color:"primary",onClick:v,children:"Submit"})})]})})]})},Ce=function(e){var t=e.setToken,n=e.setUserEmail;return Object(a.useEffect)((function(){console.log("component logout mount"),t(null),n(null)}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(p.a,{to:"/"})})},ke=function(e){var t=e.userEmail,n=e.token,c=Object(a.useState)(""),r=Object(s.a)(c,2),i=r[0],o=r[1],l=Object(a.useState)(""),j=Object(s.a)(l,2),d=j[0],b=j[1],h=Object(a.useState)(""),O=Object(s.a)(h,2),x=O[0],f=O[1],v=Object(a.useState)(!1),y=Object(s.a)(v,2),g=y[0],S=y[1];return Object(m.jsxs)(u.a,{children:[g&&Object(m.jsx)(p.a,{to:"/"}),Object(m.jsx)("h2",{children:"Change Password"}),Object(m.jsx)("form",{children:Object(m.jsxs)(F.a,{container:!0,spacing:2,children:[Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{type:"password",id:"old-password",variant:"outlined",label:"Old Password",onChange:function(e){return o(e.target.value)}})}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{type:"password",id:"new-password",variant:"outlined",label:"New Password",onChange:function(e){return b(e.target.value)}})}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(ee.a,{type:"password",id:"new-password-secondary",variant:"outlined",label:"Verify New Password",onChange:function(e){return f(e.target.value)}})}),Object(m.jsx)(F.a,{item:!0,xs:12,children:Object(m.jsx)(N.a,{id:"login",variant:"contained",color:"primary",onClick:function(){if(d!==x)alert("New Password does not match");else{var e={old_password:i,new_password:d,email:t,token:n};fetch(de+"api/changepassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.token?(alert("Password Changed Successfully"),S(!0)):(alert("There was an error changing your password."),console.log(e))}))}},children:"Submit"})})]})})]})},Pe=function(e){var t=e.task;return Object(m.jsxs)(T.a,{children:[Object(m.jsx)(E.a,{component:"th",scope:"row",children:t.name}),Object(m.jsx)(E.a,{children:t.additionalInfo}),t.completedTime&&Object(m.jsx)(E.a,{children:t.completedTime})]},t.name)},we=function(){var e=Object(p.h)(),t=e.name,n=e.taskType,c=Object(a.useState)([]),r=Object(s.a)(c,2),i=r[0],o=r[1];Object(a.useEffect)((function(){var e=function(){var e=Object(S.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),setInterval((function(){e()}),1e4)}),[]);var l=function(){var e=Object(S.a)(g.a.mark((function e(){var a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(de,"api/bots/").concat(t,"/").concat(n));case 2:if(404!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return["queue","history"].includes(n)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(u.a,{variant:"h6",children:[t," ",n]}),Object(m.jsx)(C.a,{component:k.a,children:Object(m.jsxs)(P.a,{"aria-label":"simple table",children:[Object(m.jsx)(w.a,{children:Object(m.jsxs)(T.a,{children:[Object(m.jsx)(E.a,{children:"Name"}),Object(m.jsx)(E.a,{children:"Additional Info"}),"history"===n?Object(m.jsx)(E.a,{children:"Completed Time"}):Object(m.jsx)(E.a,{children:"Added Time"})]})}),Object(m.jsx)(I.a,{children:i&&Object(q.a)(i).reverse().map((function(e){return Object(m.jsx)(Pe,{task:e},e.name)}))})]})})]}):Object(m.jsx)("div",{children:"Not Found"})},Te=function(e){var t=e.token,n=e.setToken,a=e.userEmail,c=e.setUserEmail;return Object(m.jsxs)(ge.a,{id:"main",children:[t&&Object(m.jsx)(u.a,{component:"span",children:Object(m.jsxs)(p.d,{children:[Object(m.jsx)(p.b,{path:"/bots/:name/:taskType",component:we,children:Object(m.jsx)(we,{})}),Object(m.jsx)(p.b,{path:"/bots",children:Object(m.jsx)(D,{})}),Object(m.jsx)(p.b,{path:"/contractcreation",children:Object(m.jsx)(ye,{userEmail:a})}),Object(m.jsx)(p.b,{path:"/logout",children:Object(m.jsx)(Ce,{setToken:n,setUserEmail:c})}),Object(m.jsx)(p.b,{path:"/changepassword",children:Object(m.jsx)(ke,{userEmail:a,token:t})}),Object(m.jsx)(p.b,{path:"/",children:Object(m.jsx)("h1",{children:"Main Page"})})]})}),!t&&Object(m.jsx)(Se,{setToken:n,setUserEmail:c})]})};var Ee=n(23);var Ie=function(){var e=function(){var e=Object(a.useState)(function(){var e=localStorage.getItem("token");return JSON.parse(e)}()),t=Object(s.a)(e,2),n=t[0],c=t[1];return{setToken:function(e){localStorage.setItem("token",JSON.stringify(e)),c(e)},token:n}}(),t=e.token,n=e.setToken,c=function(){var e=Object(a.useState)(function(){var e=localStorage.getItem("email");return JSON.parse(e)}()),t=Object(s.a)(e,2),n=t[0],c=t[1];return{setUserEmail:function(e){localStorage.setItem("email",JSON.stringify(e)),c(e)},userEmail:n}}(),r=c.userEmail,i=c.setUserEmail;return Object(m.jsxs)(Ee.a,{className:"App",children:[Object(m.jsx)(v,{token:t,userEmail:r}),Object(m.jsx)(Te,{token:t,setToken:n,userEmail:r,setUserEmail:i})]})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(Ie,{})}),document.getElementById("root")),Ne()},98:function(e,t,n){},99:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.d51732f2.chunk.js.map